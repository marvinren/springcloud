<div class="login-wrapper">
    <div class="login-wrapper-bg">
        <div class="container">
            <form name="form" #form="ngForm" class="login-form v-center-in-parent" action="javascript:;"
                  autocomplete="on">
                <p class="login-title text-center">需求管控平台</p>
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="用户名" [(ngModel)]="username" name="username"
                           required #usernameInput="ngModel" maxlength="32"
                           [class.shadow-invalid]="usernameInput.touched && !usernameInput.valid"/>
                </div>
                <div class="form-group">
                    <input type="password" class="form-control" placeholder="密码" [(ngModel)]="password" name="password"
                           required #pwdInput="ngModel" maxlength="32"
                           [class.shadow-invalid]="pwdInput.touched && !pwdInput.valid"/>
                </div>
                <div class="form-group row mr-0 mb-3">
                    <div class="col-sm-8">
                        <input type="text" class="form-control" placeholder="验证码" [(ngModel)]="verification_code"
                               name="verification_code" maxlength="4"
                               required #codeInput="ngModel"
                               [class.shadow-invalid]="codeInput.touched && !pwdInput.valid"/>
                    </div>
                    <div class="col-sm-4 code-example">
                        <button class="btn btn-info hand" (click)="getVerificationCode()" *ngIf="!requestCodeFlag">获取验证码</button>
                        <span class="fs-sm" *ngIf="requestCodeFlag&&!codeUrl" style="line-height:2rem;">获取中...</span>
                        <img [src]="codeUrl" *ngIf="codeUrl" (click)="getVerificationCode()">
                    </div>
                    <a class="btn text-primary btn-code-example iconfont icon-refresh fs-lg" (click)="getVerificationCode()"></a>
                </div>
                <div class="form-group form-group-sm mb-2">
                    <label class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" [(ngModel)]="recordFlag" name="recordFlag">
                        <span class="custom-control-indicator"></span>
                        <span class="custom-control-description text-base">一周内记住密码</span>
                    </label>
                </div>
                <div class="form-group  mb-3">
                    <button class="btn btn-primary w-100 border-radius" (click)="token(form)"
                            [class.btn-danger]="!form.valid" [disabled]="!form.valid"><span>登录</span></button>
                </div>
                <!--<div class="form-group text-right mb-1">
                    <a class="btn-changepwd" style="margin-right: -2rem;" (click)="changePwd()">密码修改>></a>
                </div>-->
                <p class="text-danger mt-1 text-center">{{error}}</p>
            </form>
        </div>
    </div>
</div>
